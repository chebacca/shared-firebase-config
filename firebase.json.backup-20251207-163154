{
  "hosting": [
    {
      "target": "backbone-client",
      "public": "apps/web/public",
      "ignore": [
        "firebase.json",
        "**/.*",
        "**/node_modules/**"
      ],
      "rewrites": [
        {
          "source": "/api/**",
          "function": "api"
        },
        {
          "source": "**",
          "destination": "/index.html"
        }
      ]
    },
    {
      "target": "backbone-logic",
      "public": "deploy",
      "ignore": [
        "firebase.json",
        "**/.*",
        "**/node_modules/**"
      ],
      "redirects": [],
      "rewrites": [
        {
          "source": "/api/**",
          "function": "api"
        },
        {
          "source": "/**",
          "destination": "/index.html"
        }
      ],
      "headers": [
        {
          "source": "**/*.js",
          "headers": [
            {
              "key": "Content-Type",
              "value": "application/javascript; charset=utf-8"
            },
            {
              "key": "Cache-Control",
              "value": "max-age=31536000"
            }
          ]
        },
        {
          "source": "**/*.mjs",
          "headers": [
            {
              "key": "Content-Type",
              "value": "application/javascript; charset=utf-8"
            },
            {
              "key": "Cache-Control",
              "value": "max-age=31536000"
            }
          ]
        },
        {
          "source": "**/*.@(css|png|jpg|jpeg|gif|svg|ico|woff2)",
          "headers": [
            {
              "key": "Cache-Control",
              "value": "max-age=31536000"
            }
          ]
        },
        {
          "source": "**",
          "headers": [
            {
              "key": "Content-Security-Policy",
              "value": "default-src * 'unsafe-inline' 'unsafe-eval' 'wasm-unsafe-eval' 'wasm-eval' data: blob:; script-src * 'unsafe-inline' 'unsafe-eval' 'wasm-unsafe-eval' 'wasm-eval' data: blob:; script-src-elem * 'unsafe-inline' 'unsafe-eval' 'wasm-unsafe-eval' 'wasm-eval' data: blob:; script-src-attr * 'unsafe-inline' 'unsafe-eval'; style-src * 'unsafe-inline' 'unsafe-eval' data: blob:; font-src * data: blob:; img-src * data: blob:; connect-src * data: blob: ws: wss:; frame-src * data: blob:; worker-src * data: blob:; object-src *; base-uri *; form-action *; media-src * data: blob:; manifest-src * data: blob:;"
            }
          ]
        }
      ]
    }
  ],
  "functions": [
    {
      "source": "functions",
      "codebase": "dashboard",
      "runtime": "nodejs20",
      "ignore": [
        "node_modules",
        ".git",
        "firebase-debug.log",
        "firebase-debug.*.log"
      ]
    },
    {
      "source": "server",
      "codebase": "licensing",
      "runtime": "nodejs20",
      "ignore": [
        "**/node_modules/**",
        ".git/**",
        "prisma/**"
      ],
      "endpoints": {
        "api": {
          "secretEnvironmentVariables": [
            "ADMIN_SETUP_TOKEN",
            "DATABASE_URL",
            "USE_SQL"
          ],
          "environmentVariables": {
            "FIREBASE_PROJECT_ID": "${FIREBASE_PROJECT_ID}",
            "FIREBASE_CLIENT_EMAIL": "${FIREBASE_CLIENT_EMAIL}",
            "FIREBASE_PRIVATE_KEY": "${FIREBASE_PRIVATE_KEY}",
            "ADMIN_EMAIL": "${ADMIN_EMAIL}",
            "ADMIN_PASSWORD": "${ADMIN_PASSWORD}",
            "STRIPE_SECRET_KEY": "${STRIPE_SECRET_KEY}",
            "STRIPE_PUBLISHABLE_KEY": "${STRIPE_PUBLISHABLE_KEY}",
            "STRIPE_WEBHOOK_SECRET": "${STRIPE_WEBHOOK_SECRET}",
            "STRIPE_BASIC_PRICE_ID": "${STRIPE_BASIC_PRICE_ID}",
            "STRIPE_PRO_PRICE_ID": "${STRIPE_PRO_PRICE_ID}",
            "STRIPE_ENTERPRISE_PRICE_ID": "${STRIPE_ENTERPRISE_PRICE_ID}",
            "STRIPE_ENABLED": "${STRIPE_ENABLED}",
            "STRIPE_TEST_MODE": "${STRIPE_TEST_MODE}",
            "SENDGRID_API_KEY": "${SENDGRID_API_KEY}",
            "FROM_EMAIL": "${FROM_EMAIL}",
            "FROM_NAME": "${FROM_NAME}",
            "RESEND_API_KEY": "re_26D4iq5a_N6s6eVxuSKQjv6RrQ7DYRG5v",
            "RESEND_FROM_EMAIL": "onboarding@resend.dev",
            "RESEND_FROM_NAME": "Backbone Logic",
            "JWT_SECRET": "${JWT_SECRET}",
            "JWT_EXPIRES_IN": "${JWT_EXPIRES_IN}",
            "JWT_REFRESH_EXPIRES_IN": "${JWT_REFRESH_EXPIRES_IN}",
            "FRONTEND_URL": "https://backbone-logic.web.app",
            "CORS_ORIGIN": "https://backbone-logic.web.app,https://dashboard-1c3a5.web.app,https://backbone-client.web.app",
            "ADMIN_RESET": "${ADMIN_RESET}"
          }
        }
      }
    }
  ],
  "firestore": {
    "rules": "firestore.rules",
    "indexes": "firestore.indexes.json"
  },
  "storage": {
    "rules": "storage.rules"
  },
  "emulators": {
    "auth": {
      "port": 9098,
      "host": "localhost"
    },
    "firestore": {
      "port": 8081,
      "host": "localhost"
    },
    "functions": {
      "port": 5002,
      "host": "localhost"
    },
    "hosting": {
      "port": 5001,
      "host": "localhost"
    },
    "storage": {
      "port": 9198,
      "host": "localhost"
    },
    "ui": {
      "enabled": true,
      "port": 4001,
      "host": "localhost"
    },
    "singleProjectMode": true
  }
}